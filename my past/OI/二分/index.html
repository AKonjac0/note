<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>二分 - My Docs</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../../css/brands.min.css" rel="stylesheet">
        <link href="../../../css/solid.min.css" rel="stylesheet">
        <link href="../../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">My Docs</a>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#_1" class="nav-link">二分</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="_1">二分</h1>
<blockquote>
<p>P1663</p>
</blockquote>
<p>二分当前的yy坐标，有三种情况：</p>
<p>1.两个点一样高，y坐标相同，则只要yy小于y就不满足</p>
<p>2.左点低右点高，则根据两点表示直线，xx应为</p>
<p>$$
\frac{x_2-x_1}{y_2-y_1}=\frac{xx-x_1}{yy-y_1}
\
xx=\frac{x_2-x_1}{y_2-y_1}* (yy-y_1)+x_1
$$</p>
<p>那么R=min(R,xx)</p>
<p>3.左边高，同理，L=max(L,xx)</p>
<pre><code class="language-cpp">#include&lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
using namespace std;
const double P=0.001,INF=1000001.0;
const int N=1e5+10;
struct node{
    double x,y;
}q[N];
int n;
bool check(double y){
    double L=0,R=INF;
    for(int i=2;i&lt;=n;++i){
        if(q[i].y==q[i-1].y){
            if(y&lt;q[i].y)return false;
        }
        else if(q[i].y&gt;q[i-1].y){
            double x1=q[i-1].x,x2=q[i].x,y1=q[i-1].y,y2=q[i].y;
            double x=((x2-x1)/(y2-y1))*(y-y1)+x1;
            R=min(R,x);
        }
        else{
            double x1=q[i-1].x,x2=q[i].x,y1=q[i-1].y,y2=q[i].y;
            double x=((x2-x1)/(y2-y1))*(y-y1)+x1;
            L=max(L,x);
        }
    }
    return L&lt;=R;
}
int main(){
    scanf(&quot;%d&quot;,&amp;n);
    for(int i=1;i&lt;=n;++i){
        scanf(&quot;%lf%lf&quot;,&amp;q[i].x,&amp;q[i].y);
    }
    double l=0.0,r=INF,ans=-1.0;
    while(l+P&lt;=r){
        double mid=(l+r)/2.0;
        if(check(mid)){
            r=mid;
            ans=mid;
        }else l=mid+P;
    }
    printf(&quot;%.2lf&quot;,ans);
    return 0;
}
</code></pre>
<blockquote>
<p>P1661</p>
</blockquote>
<p>二分时间，判断(曼哈顿距离+1)/2是否小于等于当前的时间，满足就将两个点用并查集连接，最后检查是否都并在一个点上即可。</p>
<pre><code class="language-cpp">#include&lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#define int long long 
using namespace std;
const int N=55,INF=1e10;
int abs1(int x){return x&gt;0?x:-x;}
int dis(int x1,int y1,int x2,int y2){return abs1(x1-x2)+abs1(y1-y2);}
struct node{
    int x,y;
}q[N];
int n;
int fa[N],vis[N];
int getfa(int u){
    if(fa[u]==u)return u;
    return fa[u]=getfa(fa[u]);
}
bool check(int x){
    for(int i=1;i&lt;=n;++i)fa[i]=i;
    for(int i=1;i&lt;n;++i){
        for(int j=i+1;j&lt;=n;++j){
            int d=dis(q[i].x,q[i].y,q[j].x,q[j].y),t=(d+1)&gt;&gt;1;
            if(t&lt;=x)fa[getfa(i)]=getfa(j);
        }
    }
    memset(vis,0,sizeof vis);
    for(int i=1;i&lt;=n;++i)vis[getfa(i)]++;
    for(int i=1;i&lt;=n;++i)if(vis[i]&gt;=n)return true;
    return false;
}
signed main(){
    scanf(&quot;%lld&quot;,&amp;n);
    for(int i=1;i&lt;=n;++i)scanf(&quot;%lld%lld&quot;,&amp;q[i].x,&amp;q[i].y);
    int ans=0,l=0,r=INF;
    while(l&lt;r){
        int mid=l+r&gt;&gt;1;
        if(check(mid)){
            r=mid;
            ans=mid;
        }else l=mid+1;
    }
    printf(&quot;%lld&quot;,ans);
    return 0;
} 

</code></pre>
<blockquote>
<p>P7514</p>
</blockquote>
<p>可以二分一下极差$x$，并枚举一下区间$[L,L+x]$,其中$L$可以是所有正反面中的任意值，一共$2n$个。因为所有的$a_i$是单增的，所有不在区间的数一定构成前后缀，那么这些卡牌一定要翻面，并且翻完面的$b_i$也要在区间内，所以这样枚举就可以将问题转化成前后缀的$RMQ$最大和最小是否都在区间内，以及前后缀是否超过了$m$个数。确定前后缀的位置可以双指针爬一下维护，是$O(n)$的。$RMQ$也是$O(n)$的($st$表)，所以总复杂度$O(n\log n)$</p>
<p>~~大常数选手表示很淦~~</p>
<pre><code class="language-cpp">#include&lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
using namespace std;
const int N=1000010,K=21,INF=1e9+10;
struct node{
    int a,b;
}a[N];

int n,m,cnt;
int b[N+N],Log[N],Max[N][K],Min[N][K];
int read1(){
    int x=0;char ch=getchar();
    while(ch&lt;'0' || ch&gt;'9') ch=getchar();
    while(ch&gt;='0' &amp;&amp; ch&lt;='9') x=(x&lt;&lt;1)+(x&lt;&lt;3)+ch-'0',ch=getchar();
    return x;
}
bool cmp(int a,int b){
    return a&lt;b;
}
void init(){
    Log[1]=0;
    for(int i=2;i&lt;=n;++i) Log[i]=Log[i&gt;&gt;1]+1;
    for(int i=1;i&lt;=n;++i) Max[i][0]=Min[i][0]=a[i].b;
    for(int j=1;(1&lt;&lt;j)&lt;=n;++j)
        for(int i=1;i+(1&lt;&lt;(j-1))&lt;=n;++i)
            Min[i][j]=INF,Min[i][j]=min(Min[i][j-1],Min[i+(1&lt;&lt;(j-1))][j-1]),Max[i][j]=max(Max[i][j-1],Max[i+(1&lt;&lt;(j-1))][j-1]);
}
int query(int t,int l,int r){
    if(l&gt;r){
        if(!t) return INF;
        else return 0;
    }
    int k=Log[r-l+1];
    if(!t) return min(Min[l][k],Min[r-(1&lt;&lt;k)+1][k]);
    else return max(Max[l][k],Max[r-(1&lt;&lt;k)+1][k]);
} 
bool check(int x){
    bool flag=false;
    int l=1,r=0,L=0,R=0,_min=0,_max=0,tot=0;
    for(int i=1;i&lt;=cnt;++i){
        L=b[i],R=b[i]+x;
        while(a[l].a&lt;L &amp;&amp; l&lt;=n) ++l;
        while(a[r+1].a&lt;=R &amp;&amp; r+1&lt;=n) ++r;
        tot=l-1+n-r;
        if(tot&gt;m)continue;
        _min=min(query(0,1,l-1),query(0,r+1,n)),_max=max(query(1,1,l-1),query(1,r+1,n));
        if(_min&lt;L || _max&gt;R)continue;
        if(_min&gt;=L &amp;&amp; _max&lt;=R){
            flag=true;break;
        }
    }
    return flag;
}

int main(){
    //freopen(&quot;P7514_9.txt&quot;,&quot;r&quot;,stdin);
    n=read1(),m=read1();cnt=0;
    for(int i=1;i&lt;=n;++i) a[i].a=read1(),b[++cnt]=a[i].a;
    for(int i=1;i&lt;=n;++i) a[i].b=read1(),b[++cnt]=a[i].b;
    sort(b+1,b+cnt+1,cmp);
    init();
    int l=0,r=b[cnt]-b[1],ans=0;
    while(l&lt;=r){
        int mid=l+r&gt;&gt;1;
        if(check(mid)) ans=mid,r=mid-1;
        else l=mid+1;
    }
    printf(&quot;%d&quot;,ans);
    return 0;
} 

</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js"></script>
        <script src="../../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
